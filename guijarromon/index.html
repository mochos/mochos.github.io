<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#e2947b ">
    <meta name="theme-color" content="#e2947b ">
    <link rel=â€manifestâ€ href=â€manifest.jsonâ€>
    <title>Guijarromon</title>
    <link rel="stylesheet" href="estilos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="img/icono.png"/>
    </head>
<body>
    <div class="contenedor">
        <img src="img/logo.png" width="600px" style="margin-top: 32px; max-width: 80%;">
        <br><br>
        <div class="botones">
            <a href="#" class="boton clipboard"><span>Copiar IP</span> </a> <a href="https://wiki.mochos.xyz/guijarro" class="boton"><span>Wiki</span> </a>

    </div>

    <div class="info">

        <input type="checkbox" class="read-more-state" id="post-1" />
        <div class="read-more-wrap">
            <a href="https://discord.mochos.xyz" class="enlace" title="Discord de Team Mochos">Discord de Team Mochos</a>
                <br><br>
            <h2><span id="jugadores"></span>
                <!--<a href="https://stats.uptimerobot.com/vpbB3Zq4A4" target="_blank"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fminecraft-server-status-badge.vercel.app%2Fapi%2Fserver%2Fguijarro.mochos.xyz%3Fport%3D25565&style=for-the-badge" alt="Estado"/></a> <a href="https://stats.uptimerobot.com/vpbB3Zq4A4" target="_blank"><img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fmapa.mochos.xyz%2F&up_message=Online&down_message=Offline&style=for-the-badge&label=Dynmap&up_color=97ca00"></a>-->
                <span id="estado">Cargando estado...</span></h2>

        <span class="read-more-target">
            <p><span id="lista"></span></p><br>
            <h2><span class="estado">
</span></h2>

        </span></div>
        <label for="post-1" class="read-more-trigger enlace"></label></a>

    </div>
      
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    var $temp = $("<input>");
    var $url = "guijarro.mochos.xyz";

$('.clipboard').on('click', function() {
  $("body").append($temp);
  $temp.val($url).select();
  document.execCommand("copy");
  $temp.remove();
  $(".clipboard").text("Â¡IP copiada!");
  
  setTimeout(function() {
      $(".clipboard").text("Copiar IP");
  }, 20000); // 5000 milisegundos = 5 segundos
})

</script>

<script>
    function checkServerStatus() {
        var url = "https://api.mcsrvstat.us/3/guijarro.mochos.xyz";

        $.getJSON(url, function(r) {
            if (r.online == false) {
                $('#estado').html('â›” Desconectado');
                $('#jugadores').css("display","none");
                $('#btnestado').addClass("alert-danger");
            } else {
                var cantidad = r.players.online;
                var es = 'es';
                var os = 's';
                if (r.players.online == 1) {
                    es = '';
                    os = '';
                }
                if (r.icon == null) {
                    $('#estado').text('â›” Desconectado');
                    $('#jugadores').css("display","none");
                    $('#btnestado').addClass("alert-danger");
                } else {
                    $('#estado').text('jugador' + es + ' conectado' + os);
                    $('#jugadores').html('ðŸŸ¢' + r.players.online);
                    $('#btnestado').addClass("alert-success");
                    $('#btnestado').addClass("button-glow");

                    // Construimos la lista de nombres de los jugadores
                    var nombres = '';
                    if (r.players.list && Array.isArray(r.players.list)) {
                        r.players.list.forEach(function(jugador) {
                            nombres += jugador.name + ', ';
                        });
                        // Elimina la Ãºltima coma y espacio
                        nombres = nombres.slice(0, -2);
                    }
                    $('#lista').html(nombres);
                }
            }
        });
    }

    // Ejecutar la funciÃ³n una vez al inicio
    checkServerStatus();
    // Ejecutar la funciÃ³n cada 30 segundos
    setInterval(checkServerStatus, 30000);
</script>
</body>
</html>